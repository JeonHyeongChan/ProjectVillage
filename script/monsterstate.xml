<?xml version="1.0" encoding="utf-8"?>
<CodeBlockFile xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" Id="851b6393-b8b0-4e01-afa9-46275f62c5a0" Language="Lua" Name="MonsterState" Type="Component" Source="None" ModifyTime="2025-11-06T15:58:34.2901955+09:00">
  <CoreVersion Major="0" Minor="2" />
  <ScriptVersion Major="1" Minor="1" />
  <Description />
  <Properties>
    <CodeBlockProperty Name="Damage" Type="number" DefaultValue="100" SyncDirection="None" />
    <CodeBlockProperty Name="HP" Type="number" DefaultValue="100" SyncDirection="None" />
    <CodeBlockProperty Name="EXP" Type="number" DefaultValue="100" SyncDirection="None" />
  </Properties>
  <Methods />
  <EntityEventHandlers>
    <CodeBlockEntityEventHandler Name="HandleTriggerEnterEvent" EventName="TriggerEnterEvent" ParameterName="event" Target="self" Scope="All">
      <Code><![CDATA[

-- Parameters
local TriggerBodyEntity = event.TriggerBodyEntity
---------------------------------------------------------
if TriggerBodyEntity == _UserService.LocalPlayer and _UserService.LocalPlayer.StateComponent.CurrentStateName ~= "DEAD" then
	
	self.Damage = math.random(self.Damage - 20, self.Damage + 20)
	TriggerBodyEntity.HitComponent:OnHit(self.Entity, self.Damage, false, "", 1)
end
]]></Code>
    </CodeBlockEntityEventHandler>
    <CodeBlockEntityEventHandler Name="HandleHitEvent" EventName="HitEvent" ParameterName="event" Target="self" Scope="All">
      <Code><![CDATA[
--------------- Native Event Sender Info ----------------
-- Sender: HitComponent
-- Space: Server, Client
---------------------------------------------------------

-- Parameters
-- local AttackCenter = event.AttackCenter
-- local AttackerEntity = event.AttackerEntity
 local Damages = event.Damages
-- local Extra = event.Extra
-- local IsCritical = event.IsCritical
-- local TotalDamage = event.TotalDamage
---------------------------------------------------------
for i = 1, Damages.Count do
	self.HP = self.HP - Damages[i]
	
	if self.HP < 0 then
		
		self.Entity:Destroy(0.1)
	end
end
]]></Code>
    </CodeBlockEntityEventHandler>
  </EntityEventHandlers>
</CodeBlockFile>